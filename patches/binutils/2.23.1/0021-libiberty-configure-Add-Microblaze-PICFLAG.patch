From bdc6331f82024c093c3492abdf7b3964385e00d3 Mon Sep 17 00:00:00 2001
From: David Holsgrove <david.holsgrove@xilinx.com>
Date: Fri, 28 Sep 2012 16:30:35 +1000
Subject: [PATCH 21/24] libiberty/ * configure: Add Microblaze PICFLAG

Microblaze requires libiberty to be compiled with -fPIC

Signed-off-by: David Holsgrove <david.holsgrove@xilinx.com>
Signed-off-by: Edgar E. Iglesias <edgar.iglesias@gmail.com>
---
 libiberty/ChangeLog |    4 ++++
 libiberty/configure |    3 +++
 2 files changed, 7 insertions(+), 0 deletions(-)

diff --git a/libiberty/ChangeLog b/libiberty/ChangeLog
index 6615047..4039873 100644
--- a/libiberty/ChangeLog
+++ b/libiberty/ChangeLog
@@ -1,3 +1,7 @@
+2012-10-10  David Holsgrove  <david.holsgrove@xilinx.com>
+
+	* configure: Add Microblaze PICFLAG
+
 2012-07-31  Mike Frysinger  <vapier@gentoo.org>
 
 	* md5.c (md5_finish_ctx): Declare swap_bytes.  Assign SWAP() output
diff --git a/libiberty/configure b/libiberty/configure
index 6e98352..266d8b2 100755
--- a/libiberty/configure
+++ b/libiberty/configure
@@ -4899,6 +4899,9 @@ case "${host}" in
     m68k-*-*)
 	PICFLAG=-fpic
 	;;
+    microblaze*-*-*)
+	PICFLAG=-fPIC
+	;;
     # FIXME: Override -fPIC default in libgcc only?
     sh-*-linux* | sh[2346lbe]*-*-linux*)
 	PICFLAG=-fpic
-- 
1.7.1

